import logging
from datetime import datetime

# Ensure logs directory exists
import os
os.makedirs('logs', exist_ok=True)

# Configure logging for the SDN Controller
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('logs/controller.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

def log_controller_activity(message):
    """Log activity or events related to the SDN Controller."""
    logger.info(f"Controller Activity: {message}")

def log_error(error_message, error_details=None):
    """Log errors encountered by the controller."""
    if error_details:
        logger.error(f"Error Occurred: {error_message}\nDetails: {error_details}")
    else:
        logger.error(f"Error Occurred: {error_message}")

# Example usage within tests
def test_example(setup_controller):
    log_controller_activity("Starting a new test")
    
    try:
        # Perform test operations here
        setup_controller.do_something()
        
    except Exception as e:
        log_error("Test failed", str(e))
        raise
        
    log_controller_activity("Test completed successfully")
